--- MINIMUM_SPANNING_TREE.java.bak	2025-11-08 12:32:02.591688851 +0530
+++ MINIMUM_SPANNING_TREE.java	2025-11-08 12:32:02.594632449 +0530
@@ -23,17 +23,24 @@
             if (groupByNode.get(vertex_u) != groupByNode.get(vertex_v)) {
                 minSpanningTree.add(edge);
                 groupByNode = update(groupByNode, vertex_u, vertex_v);
-                for (Node node : groupByNode.get(vertex_v)) {
-                    groupByNode = update(groupByNode, node, vertex_u);
-                }
+                // no further looping here: update merges groups and updates mapping for all nodes
             }
         }
         return minSpanningTree;
     }
 
     public static Map<Node,Set<Node>> update(Map<Node,Set<Node>> groupByNode, Node vertex_u, Node vertex_v) {
-        Set<Node> vertex_u_span = groupByNode.get(vertex_u);
-        vertex_u_span.addAll(groupByNode.get(vertex_v));
+        Set<Node> setU = groupByNode.get(vertex_u);
+        Set<Node> setV = groupByNode.get(vertex_v);
+
+        // create merged set (new object) containing all nodes from both groups
+        Set<Node> merged = new HashSet<>(setU);
+        merged.addAll(setV);
+
+        // update the map to point every node in merged to the merged set
+        for (Node n : merged) {
+            groupByNode.put(n, merged);
+        }
 
         return groupByNode;
     }
